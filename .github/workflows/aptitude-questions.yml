name: Aptitude Questions API (staggered every 30 mins)

on:
  schedule:
    - cron: "0,30 * * * *"   # :00 and :30 → questions1
    - cron: "5,35 * * * *"   # :05 and :35 → questions2
    - cron: "10,40 * * * *"  # :10 and :40 → questions3
    - cron: "15,45 * * * *"  # :15 and :45 → questions4
    - cron: "20,50 * * * *"  # :20 and :50 → questions5
    - cron: "25,55 * * * *"  # :25 and :55 → questions6
  workflow_dispatch:

jobs:
  call-api:
    runs-on: ubuntu-latest
    steps:
      - name: Call appropriate API
        run: |
          MINUTE=$(date +'%M')
          case "$MINUTE" in
            "00"|"30") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions1?api_key=${{ secrets.API_KEY }}" ;;
            "05"|"35") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions2?api_key=${{ secrets.API_KEY }}" ;;
            "10"|"40") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions3?api_key=${{ secrets.API_KEY }}" ;;
            "15"|"45") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions4?api_key=${{ secrets.API_KEY }}" ;;
            "20"|"50") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions5?api_key=${{ secrets.API_KEY }}" ;;
            "25"|"55") curl -X GET "https://9-lives.vercel.app/api/add/aptitude/questions?api_key=${{ secrets.API_KEY }}" ;;
          esac
